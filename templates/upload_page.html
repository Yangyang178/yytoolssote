{% extends 'base.html' %}
{% block content %}
<div class="upload-container">
    <div class="container">
        <div class="page-header">
            <h1 class="page-title">上传发布文件</h1>
            <p class="page-subtitle">轻松上传、存储与管理您的文件</p>
        </div>
        
        <div class="upload-form-card">
            <form action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data" class="upload-form">
                <div class="form-section">
                    <h2 class="section-title">文件信息</h2>
                    
                    <div class="form-group">
                        <label for="file" class="form-label">选择文件</label>
                        <div class="file-upload">
                            <input type="file" id="file" name="file" required class="file-input">
                            <label for="file" class="file-label">
                                <span class="file-icon">📁</span>
                                <div class="file-info">
                                    <span class="file-text">点击选择文件或拖拽文件到此处</span>
                                    <span class="file-size"></span>
                                </div>
                            </label>
                        </div>
                        <p class="form-hint">支持上传图片、文档、视频和音频文件，单个文件大小不超过200MB</p>
                        
                        <!-- 文件预览区域 -->
                        <div class="file-preview-container" id="filePreviewContainer" style="display: none;">
                            <div class="file-preview-header">
                                <h3 class="preview-title">文件预览</h3>
                                <button type="button" class="preview-clear-btn" id="clearPreview">清除预览</button>
                            </div>
                            <div class="file-preview-content" id="filePreviewContent">
                                <!-- 预览内容将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group half">
                            <label for="project_name" class="form-label">项目名称</label>
                            <input type="text" id="project_name" name="project_name" placeholder="请输入项目名称" class="form-input">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="project_desc" class="form-label">项目描述</label>
                        <textarea id="project_desc" name="project_desc" rows="4" placeholder="请输入项目描述" class="form-textarea"></textarea>
                    </div>
                </div>
                
                <div class="form-section">
                    <h2 class="section-title">上传设置</h2>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="is_public" name="is_public" checked class="checkbox-input">
                            <label for="is_public" class="checkbox-label">公开此文件</label>
                        </div>
                        <p class="form-hint">公开的文件可以被其他用户访问</p>
                    </div>
                    
                    {% if session.role == 'developer' %}
                    <div class="form-group">
                        <label for="upload_target" class="form-label">上传位置</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="target_home" name="upload_target" value="home" checked class="radio-input">
                                <label for="target_home" class="radio-label">上传到首页文件列表</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="target_user" name="upload_target" value="user" class="radio-input">
                                <label for="target_user" class="radio-label">上传到用户中心</label>
                            </div>
                        </div>
                        <p class="form-hint">选择文件上传的目标位置</p>
                    </div>
                    {% endif %}
                </div>
                
                <div class="form-actions">
                    <a href="{{ url_for('index') }}" class="btn btn-cancel">取消</a>
                    <button type="submit" class="btn btn-primary btn-submit">
                        <span class="btn-icon">📤</span>
                        上传发布
                    </button>
                </div>
            </form>
        </div>
        
        <div class="upload-features">
            <h2 class="features-title">上传发布的优势</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">🚀</div>
                    <h3 class="feature-title">快速上传</h3>
                    <p class="feature-desc">支持大文件快速上传，断点续传</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🔒</div>
                    <h3 class="feature-title">安全可靠</h3>
                    <p class="feature-desc">文件加密存储，保障您的数据安全</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">📱</div>
                    <h3 class="feature-title">多端访问</h3>
                    <p class="feature-desc">支持在不同设备上访问和管理文件</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🔄</div>
                    <h3 class="feature-title">版本管理</h3>
                    <p class="feature-desc">支持文件版本管理，轻松回溯历史版本</p>
                </div>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="{{ url_for('static', filename='upload.css') }}">
<script src="{{ url_for('static', filename='upload.js') }}"></script>
{% endblock %}